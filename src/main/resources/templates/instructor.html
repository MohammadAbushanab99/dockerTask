<html xmlns:th="http://www.thym eleaf.org" xmlns="http://www.w3.org/1999/html">
<html>

<head>
    <title>Instructor Page</title>
</head>

<style>
      @import url(https://fonts.googleapis.com/css?family=Roboto:300);
     body, h1, h2, p, ul, li, button {
         margin: 0;
         padding: 0;
         box-sizing: border-box;
     }

     body {
         font-family: Arial, sans-serif;
         background-color: #f0f0f0;
     }

     .header {
         background-color: #007BFF;
         color: #fff;
         padding: 10px;
         text-align: center;
     }

     .header h1 {
         font-size: 24px;
         margin: 0;
     }

     .logout-btn {
         color: #fff;
         text-decoration: none;
         font-size: 16px;
         margin-right: 20px;
         margin-top: 20px;
         float: right;
     }

     .info-container {
         background-color: #fff;
         padding: 20px;
         margin: 20px;
         border-radius: 5px;
         box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
     }

     .options {
         list-style: none;
         padding: 0;
         margin: 20px;

     }

     .option-btn {
         background-color: #007BFF;
         color: #fff;
         border: none;
         padding: 10px 20px;
         border-radius: 5px;
         cursor: pointer;
         margin-bottom: 10px;
     }

     .option-btn:hover {
         background-color: #0056b3;
     }

     .result-container {
         background-color: #fff;
         padding: 20px;
         margin: 20px;
         border-radius: 5px;
         box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
     }

     .result-container p {
         margin-bottom: 10px;
     }

     .result-container table {
         border-collapse: collapse;
         width: 100%;
     }

     .result-container th, .result-container td {
         border: 1px solid #ddd;
         padding: 8px;
         text-align: left;
     }

     .result-container th {
         background-color: #f2f2f2;
     }

     .result-container tr:nth-child(even) {
         background-color: #f2f2f2;
     }

     .result-container tr:hover {
         background-color: #ddd;
     }

        .logout-btn {
            background-color: #dc3545;
            color: #fff;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .logout-btn:hover {
            background-color: #555;
        }
      body {
        background: #76b852; /* fallback for old browsers */
        background: rgb(141,194,111);
        background: linear-gradient(90deg, rgba(141,194,111,1) 0%, rgba(118,184,82,1) 50%);
        font-family: "Roboto", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
    </style>
<div class="info-container">
    <p><strong>Instructor ID: <span id="instructorId" th:text="${instructorId}"></span></strong></p>
    <p><strong>Name: <span th:text="${instructorName}"></span></strong></p>
</div>

<div class="container">
    <h2>Select an option:</h2>
    <ul class="options">
        <li><button class="option-btn" onclick="showContent('courseInfoContainer')">See My Courses Information</button></li>
        <li><button class="option-btn" onclick="showContent('gradesAndStudentsContainer')">>See Grades and My Students Information</button></li>
        <li><button class="option-btn" onclick="showContent('AddCourseCriteria')">Add Course Criteria</button></li>
        <li><button class="option-btn" onclick="showContent('CalculateStatisticalData')">see grades</button></li>
    </ul>
    <a href="logout" class="logout-btn">Log Out</a>
    <div id="courseInfoContainer" class="result-container" style="display: none;">
        <h2>Course Information</h2>
            <h2>Course Information</h2>
            <p th:each="course : ${courseList}">
                Course ID: <span th:text="${course.id}"></span><br>
                Course Name: <span th:text="${course.courseName}"></span><br>
                Number of Students: <span th:text="${course.numberOfStudents}"></span><br>
            <hr>
            </p>

    </div>
    <div id="gradesAndStudentsContainer" class="result-container" style="display: block;">
        <h3>Select a Course:</h3>
        <form action="/login/instructor/addGrades" method="post">
            <!--  <select name="selectedCourseId" id="courseSelect" th:field="${selectedCourseId}">-->
            <select name="selectedCourseId" id="courseSelect">
                 <option th:each="course : ${courseList}" th:value="${course.id}" th:text="${course.courseName}"></option>
             </select>
             <button type="submit" >Show Course Grades and Students Information</button>


        <h3>Selected Course Information:</h3>
        <p><strong>Course ID:</strong> <span th:text="${selectedCourseId}"  id="courseIdSpan"></span></p>
        <p><strong>Course Name:</strong> <span th:text="${selectedCourseName}"></span></p>
        <h3>Students and Remarks:</h3>
            <div>
                <table>
                    <thead>
                    <tr>
                        <td>Student ID</td>
                        <td>Student Name</td>
                        <td th:text="${remarks1}">Remarks 1</td>
                        <td th:text="${remarks2}">Remarks 2</td>
                        <td>Final Grade</td>
                        <td>Total Grade</td>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="entry : ${studentsList}">
                        <td th:text="${entry.key}"></td>
                        <td th:text="${entry.value.getStudentId()}"></td>
                        <td>
                            <input type="text" th:value="${entry.value.getFirstExam()}" />
                        </td>
                        <td>
                            <input type="text" th:value="${entry.value.getSecondExam()}" />
                        </td>

                        <td>
                            <input type="text" th:value="${entry.value.getFinalExam()}" />
                        </td>

                        <td>
                            <input type="text" th:value="${entry.value.getTotalGrade()}" />
                        </td>
                        <td>

                            <button type="button" onclick="saveRemarks('${entry.value.getStudentId()}')">Save Remarks</button>

                        </td>
                    </tr>
                    </tbody>
                </table>
    </div>
        </form>




    </div>

    <div id="CalculateStatisticalData" class="result-container" style="display: none;">

        <p th:each="course : ${courseList}">
            Course ID: <span th:text="${course.id}"></span><br>
            Course Name: <span th:text="${course.courseName}"></span><br>
            Number of Students: <span th:text="${course.numberOfStudents}"></span><br>
        <hr>

        <form action="/GenerateCSV" method="get">
            <p> course id : <input type="text" id="CSV"  name="courseIdCSV"></p>
            <p> my id : <input type="text"  id="iiD" name="myId"></p>

            <input type="submit" value="csv file">
        </form>
    </div>
</div>

<script>
function showContent(contentId) {
    const allContainers = document.getElementsByClassName('result-container');
    for (let i = 0; i < allContainers.length; i++) {
        allContainers[i].style.display = 'none';
    }
    const containerToShow = document.getElementById(contentId);
    containerToShow.style.display = 'block';
}

       async function saveRemarks(studentId) {



                        const data = {
                            selectedStudentId: "015",
                            midExam: 0,
                            quizzes: 0,
                            firstExam: 0,
                            secondExam: 0,
                            finalExam: 0,
                            totalGrade: 0,
                            courseId:3,
                            id:"11"

                        };
                                            console.log(data);
                  // Send the data to the server using AJAX with POST method
                  fetch("/login/instructor/SaveMarks", {
                      method: "POST",
                      headers: {
                          "Content-Type": "application/json"
                      },
                      body: JSON.stringify(data)
                  })
                  .then(response => response.json())
                  .then(result => {
                      if (result.success) {
                          alert("Remarks saved successfully!");
                      } else {
                          alert("Error while saving remarks.");
                      }
                  })
                  .catch(error => {
                      console.error("Error:", error);
                      alert("An error occurred while processing the request.");
                  });
            }


 </script>
</body>
</html>